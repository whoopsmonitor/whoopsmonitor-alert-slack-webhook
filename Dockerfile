FROM node:14.13.0-alpine3.12
LABEL maintainer="Daniel Rataj <daniel.rataj@centrum.cz>"
LABEL org.opencontainers.image.source="https://github.com/whoopsmonitor/whoopsmonitor-alert-slack-webhook"
LABEL com.whoopsmonitor.documentation="https://github.com/whoopsmonitor/whoopsmonitor-alert-slack-webhook"
LABEL com.whoopsmonitor.icon="data:image/png;base64,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"
LABEL com.whoopsmonitor.env.WM_WEBHOOK_URL="Slack's incomming webhook URL"

WORKDIR /app
COPY ./src/index.js ./index.js
COPY ./src/package.json ./package.json
COPY ./src/package-lock.json ./package-lock.json

RUN npm install

CMD [ "npm", "start", "--silent" ]
